@startuml


== Inicio ==
Usuario -> PantallaGestiónStock : seleccionarBateria(codigo)
activate PantallaGestiónStock

Usuario -> PantallaGestiónStock : ingresarNuevaCantidad(cantidad)
Usuario -> PantallaGestiónStock : clickGuardar()

PantallaGestiónStock -> ControladorStock : modificarStock(codigo, cantidad)
activate ControladorStock

ControladorStock -> Bateria : verificarCodigo(codigo)
activate Bateria

alt Código existente
    Bateria --> ControladorStock : true
    deactivate Bateria

    ControladorStock -> Bateria : actualizarCantidad(cantidad)
    activate Bateria
    Bateria --> ControladorStock : ok
    deactivate Bateria

    ControladorStock --> PantallaGestiónStock : stockActualizado
    deactivate ControladorStock
    PantallaGestiónStock --> Usuario : mensaje="Stock actualizado"

else Código no encontrado
    Bateria --> ControladorStock : false
    deactivate Bateria

    ControladorStock --> PantallaGestiónStock : errorCodigo
    deactivate ControladorStock
    PantallaGestiónStock --> Usuario : mensaje="Código no encontrado"
end

== Flujo alternativo ==
Usuario -> PantallaGestiónStock : clickCancelar()
PantallaGestiónStock --> Usuario : operacionCancelada
deactivate PantallaGestiónStock

@enduml
